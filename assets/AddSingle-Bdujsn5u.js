import{x,z as g,r as u,j as e}from"./index-0Ki6u3Cx.js";import{g as l,i as p,f as d,C as h,v as S,I as a,a as y}from"./v4-Drrct12M.js";import{M as O,X as j}from"./TextField-D89L-x6v.js";function R(){const b=x(),[c]=g(),t=u.useRef(null);return u.useEffect(()=>{if(!t.current)return;const i=c.get("id");if(!i)return;const o=localStorage.getItem("job-offers"),n=(o?JSON.parse(o):[]).find(r=>r.id===i);n&&Object.keys(l(t.current)).forEach(r=>{var m;const f=(m=t.current)==null?void 0:m.elements.namedItem(r);p(f)&&d(f,n[r]??"")})},[c]),e.jsx(h,{ref:t,component:"form",sx:{height:"100%"},onSubmit:i=>{if(i.preventDefault(),!t.current)return;console.log(l(t.current));const o=localStorage.getItem("job-offers");let s=o?JSON.parse(o):[];const n=l(t.current);s=s.filter(r=>r.id!==n.id),s.unshift({...n,id:n.id?n.id:S()}),localStorage.setItem("job-offers",JSON.stringify(s)),b("/")},children:e.jsxs(O,{sx:{padding:2},children:[e.jsx("input",{type:"hidden",name:"id"}),e.jsx(a,{name:"url",label:"URL",children:e.jsx(j,{type:"button",sx:{marginLeft:1},onClick:()=>{t.current&&y(l(t.current).url).then(i=>{Object.entries(i).forEach(([o,s])=>{var r;const n=(r=t.current)==null?void 0:r.elements.namedItem(o);p(n)&&d(n,s??"")})})},children:"Fill from URL"})}),e.jsx(a,{name:"position",label:"Position"}),e.jsx(a,{name:"company",label:"Company"}),e.jsx(a,{name:"status",label:"Status",type:"autocomplete",options:["Applied","Declined"]}),e.jsx(a,{name:"salary",label:"Salary",multiline:!0}),e.jsx(a,{type:"date",name:"appliedDate",label:"Applied Date"}),e.jsx(a,{name:"location",label:"Location",type:"autocomplete",options:["Remote","Wroc≈Çaw"]}),e.jsx(a,{name:"description",label:"Description",multiline:!0,sx:{marginBottom:4}}),e.jsx(j,{variant:"contained",type:"submit",children:"Save"})]})})}export{R as AddSingle};
